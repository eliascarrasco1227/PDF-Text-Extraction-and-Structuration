2025-09-28 16:35:56 - pdf_processor - INFO - Logging configurado. Archivo: logs\application_date_2025-09-28_time_16-35-56.log
2025-09-28 16:36:03 - pdf_processor - INFO - --------------------------------------
2025-09-28 16:36:03 - pdf_processor - INFO - | PDF TEXT EXTRACTOR AND STRUCTURATOR |
2025-09-28 16:36:03 - pdf_processor - INFO - --------------------------------------
2025-09-28 16:36:03 - pdf_processor - INFO - 
2025-09-28 16:36:03 - pdf_processor - INFO - üìÑ Procesando: data/Gramatica-Normativa-Kaqchikel.pdf
2025-09-28 16:36:03 - pdf_processor - INFO - üìñ P√°ginas a procesar: p√°ginas 146-146
2025-09-28 16:36:03 - pdf_processor - INFO - üì¶ Bloques de: 5 p√°ginas
2025-09-28 16:36:03 - pdf_processor - INFO - üìù Prompt usado: prompts/prompt_v3
2025-09-28 16:36:03 - pdf_processor - INFO - --------------------------------------
2025-09-28 16:36:03 - pdf_processor - INFO - 
2025-09-28 16:36:03 - pdf_processor - INFO - ü§ñ Generando respuesta
2025-09-28 16:36:04 - pdf_processor - INFO - üìÑ Procesando p√°ginas 146-146
2025-09-28 16:36:04 - pdf_processor - INFO - üìñ Procesando p√°ginas 146 a 146 (1 p√°ginas)...
2025-09-28 16:36:23 - pdf_processor - ERROR - ‚ùå Error inesperado durante el procesamiento: [WinError 10060] Se produjo un error durante el intento de conexi√≥n ya que la parte conectada no respondi√≥ adecuadamente tras un periodo de tiempo, o bien se produjo un error en la conexi√≥n establecida ya que el host conectado no ha podido responder
2025-09-28 16:36:23 - pdf_processor - ERROR - ‚ùå Error durante el procesamiento: [WinError 10060] Se produjo un error durante el intento de conexi√≥n ya que la parte conectada no respondi√≥ adecuadamente tras un periodo de tiempo, o bien se produjo un error en la conexi√≥n establecida ya que el host conectado no ha podido responder
Traceback (most recent call last):
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_transports\default.py", line 101, in map_httpcore_exceptions
    yield
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_transports\default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpcore\_sync\connection_pool.py", line 256, in handle_request
    raise exc from None
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpcore\_sync\connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpcore\_sync\connection.py", line 101, in handle_request
    raise exc
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpcore\_sync\connection.py", line 78, in handle_request
    stream = self._connect(request)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpcore\_sync\connection.py", line 156, in _connect
    stream = stream.start_tls(**kwargs)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpcore\_backends\sync.py", line 170, in start_tls
    raise exc
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\contextlib.py", line 137, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpcore\_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [WinError 10060] Se produjo un error durante el intento de conexi√≥n ya que la parte conectada no respondi√≥ adecuadamente tras un periodo de tiempo, o bien se produjo un error en la conexi√≥n establecida ya que el host conectado no ha podido responder

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "C:\Users\elcar\OneDrive\Documentos\MASTER\TFM\main.py", line 45, in run
    response = self.ai_generator.generate_from_pdf(PDF_PATH, prompt)
  File "C:\Users\elcar\OneDrive\Documentos\MASTER\TFM\core\ai_generator.py", line 106, in generate_from_pdf
    response_text = self._generate_content_with_retry(pdf_bytes, xml_prompt)
  File "C:\Users\elcar\OneDrive\Documentos\MASTER\TFM\core\ai_generator.py", line 54, in _generate_content_with_retry
    response = self.client.models.generate_content(
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\google\genai\models.py", line 5898, in generate_content
    response = self._generate_content(
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\google\genai\models.py", line 4838, in _generate_content
    response = self._api_client.request(
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\google\genai\_api_client.py", line 1077, in request
    response = self._request(http_request, stream=False)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\google\genai\_api_client.py", line 968, in _request
    return self._retry(self._request_once, http_request, stream)  # type: ignore[no-any-return]
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\tenacity\__init__.py", line 475, in __call__
    do = self.iter(retry_state=retry_state)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\tenacity\__init__.py", line 376, in iter
    result = action(retry_state)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\tenacity\__init__.py", line 418, in exc_check
    raise retry_exc.reraise()
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\tenacity\__init__.py", line 185, in reraise
    raise self.last_attempt.result()
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\concurrent\futures\_base.py", line 439, in result
    return self.__get_result()
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\concurrent\futures\_base.py", line 391, in __get_result
    raise self._exception
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\tenacity\__init__.py", line 478, in __call__
    result = fn(*args, **kwargs)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\google\genai\_api_client.py", line 951, in _request_once
    response = self._httpx_client.request(
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_client.py", line 825, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_client.py", line 914, in send
    response = self._send_handling_auth(
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_transports\default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\contextlib.py", line 137, in __exit__
    self.gen.throw(typ, value, traceback)
  File "C:\Users\elcar\anaconda3\envs\gemini-env\lib\site-packages\httpx\_transports\default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [WinError 10060] Se produjo un error durante el intento de conexi√≥n ya que la parte conectada no respondi√≥ adecuadamente tras un periodo de tiempo, o bien se produjo un error en la conexi√≥n establecida ya que el host conectado no ha podido responder
