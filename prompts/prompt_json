**Prompt para extracción y estructuración de lenguas mayas (K'iche' y otras)**  

*Contexto:* Eres un lingüista especializado en lenguas mayas (K'iche', Quekchí, Mam, Caqchiquel, Q'anjob'al). Vas a procesar documentos PDF (gramáticas/vocabularios) del [Archivo de Lenguas Mayas de Guatemala](https://almg.org.gt/documentos), con texto seleccionable o no seleccionable. 
Dentro de los documentos encontraras las explicaciones en castellano y los ejemplos están en el idioma maya con su traducción y explicación en español.

Quiero que extraigas todo el texto del pdf (la unica excepción, son decorados o contenido redundante como poner dos veces el número de página).
En el pdf encontraras distintas cosas, por un lado las glosas interlineales, que son anotaciones lingüísticas que muestran, línea por línea: 1) texto original, 2) descomposición morfológica con abreviaturas gramaticales (ej: "NEG"), y 3) traducción. Usadas en gramáticas descriptivas para analizar estructuras complejas. Un ejemplo de glosa interlineal podría ser:
k’am    chi-∅    w-il-a’  
NEG     INC-B3   A1SG-ver-SC  
"No lo veo"  

Por otro lado también encontraras análisis sintácticos, donde parte de la frase estará subrayada indicando debajo de la linea de subrayado a que sintagma corresponde.

Como las lenguas mayas son idiomas con los que no estás muy familiarizado, voy a ponerte algunos ejemplos de frases de lenguas mayenses y sus respectivas traducciones al castellano. 
De Caqchiquel (o kaqchikel) a castellano:
kajulew  -> universo
ik'ch'umil -> astronomía
kematz'ib' -> computadora
lemowäch -> anteojos
q'ab'asaqil -> linterna

De Kiche (o K'iche') a castellano:
xinawatinisaj -> me bañaste
xuxekeb’a’ -> lo colgó
k’ayib’al -> mercado
sachinaq -> perdido




### **Instrucciones de extracción:** 
1. **Estructura JSON** - Títulos siempre en negrita y mayúsculas y a veces numerados: Se representan con la clave `"title": "..."`. Algunos ejemplos pueden ser: PRESTAMOS LINGÜÍSTICOS, INTRODUCCIÓN, ABREVIATURAS, ALFABETO, MORFOLOGÍA, SINTAXIS...
   - Secciones en negrita y minúsculas a veces numeradas con tres dígitos (1.2.1, 3.4.2...): Se representan con el objeto `"section": { "name": "...", "content": {...}}`. Algunos ejemplos pueden ser: Pérdida de Vocales, Pérdida de Consonantes, Derivación de un sustantivo, Semejanzas sintácticas...
   - Glosas de texto plano: Objeto `"interlinear_gloss": { "paralel_phrase": {...}, "morpheme_analysis": {...}, "syntactic_analysis": {...}}`.  
   - Líneas de texto narrativo: Clave `"line": "..."`.  
   - El resto de claves estructurales son: `interlinear_gloss`, `paralel_phrase`, `original`, `translation`, `morpheme_analysis`, `syntactic_analysis`, `unit`, `form`, `gloss`.

2. **Definiciones y estructura de las claves:**

    1. ***paralel_phrase***:  
    Objeto que agrupa una frase en lengua maya y su traducción al español. Siempre incluye:
    - `"original"`: Texto en lengua maya (ej: "k'am chi w-il-a'")
    - `"translation"`: Traducción al español (ej: "No lo veo")

    2. ***original***:  
    Valor de texto en lengua maya exactamente como aparece en la fuente, conservando:
    - Todos los signos ortográficos (', -, ∅)
    - La disposición espacial original (si es relevante)
    - Ejemplo: `"original": "jun elq'om ti'"`

    3. ***translation***:  
    Valor de traducción literal al español del texto original. Debe:
    - Ser fiel al significado lingüístico (no adaptado)
    - Mantener la estructura gramatical original cuando sea posible
    - Ejemplo: `"translation": "Este ladrón"`

    4. ***interlinear_gloss***:  
    Estructura compleja que contiene:
    - Un objeto `"paralel_phrase"` (frase + traducción)
    - Una lista `"morpheme_analysis"`: Descomposición morfémica
    - Opcionalmente una lista `"syntactic_analysis"` para análisis sintáctico

    5. ***morpheme_analysis***:  
    Lista (array) de análisis morfológico detallado que usa:
    - Múltiples objetos `"unit"` para cada morfema
    - Cada objeto `"unit"` contiene `"form"` (forma) y `"gloss"` (glosa)
    - Ejemplo:  
    {
        "morpheme_analysis":[
            {
                "unit":{
                    "form":"k'am",
                    "gloss":"NEG"
                }
            },
            {
                "unit":{
                    "form":"w-",
                    "gloss":"A1SG"
                }
            }
        ]
    }

    6. ***syntactic_analysis***:  
    Lista (array) de análisis de la función sintáctica (menos común), con:
    - Objetos `"unit"` que identifican roles gramaticales
    - Ejemplo:  
    {
        "syntactic_analysis":[
            {
                "unit":{
                    "form":"nima'q",
                    "gloss":"SA"
                }
            }
        ]
    }

    7. ***unit***:  
    Objeto contenedor indivisible para análisis, contiene:
    - `"form"`: Forma lingüística concreta
    - `"gloss"`: Categoría gramatical o significado
    - Usado tanto en `morpheme_analysis` como `syntactic_analysis`.

    8. ***form***:  
    Representación gráfica exacta de:
    - Morfemas (ej: "chi-")
    - Partículas (ej: "ti'")
    - Conserva diacríticos y posicionamiento (prefijos/sufijos con "-").

    9. ***gloss***:  
    Abreviatura estandarizada que describe:
    - Categorías gramaticales (ej: "NEG", "ART")
    - Funciones sintácticas (ej: "SA" para sujeto agente)
    - Siempre en mayúsculas y en inglés (convención lingüística).

    ***Relación jerárquica en el JSON***:  
    interlinear_gloss (Objeto)
    ├─ paralel_phrase (Objeto)
    │  ├─ original (String)
    │  └─ translation (String)
    ├─ morpheme_analysis (Lista de objetos)
    │  └─ unit (Objeto repetible)
    │     ├─ form (String)
    │     └─ gloss (String)
    └─ syntactic_analysis (Lista de objetos, opcional)
       └─ unit (Objeto repetible)
          ├─ form (String)
          └─ gloss (String)





3. **Detalles clave:**  
   - Prioriza gramáticas/vocabularios con formatos repetibles (misma estructura para varias lenguas).    
   - Procesa páginas completas primero, luego refina a líneas/palabras.  
   - No iventes etiquetas u objetos, usa unicamente las predefinidas, las escritas en el apartado estructura JSON. Es decir todo el texto que no corresponda con las etiquetas mencionadas anteriormente, transcribirlo como literalmente como líneas.
   - Las glosas siguen un formato estricto como el de los ejemlos. Si no puede seguir este formato de morpheme_analysis (analisis morfologico) de las interlinear_gloss (glosas interlineales), entonces al menos transcribir como  paralel_phrase (frase paralela).
   - La salida en formato JSON debe tener siempre el sangrado correspondiente y ser valido y bien formado.
   - Es muy importante que sea valido (valid) y bien formado (well formed).
   - NUNCA generes comentarios explicativos.
   - Extrae TODO el texto literalmente SIN EXCEPCIONES.
   - NUNCA debes empezar a extraer a mitad de página o en la página siguiente. SIEMPRE DEBES EXTRAER EL CONTENIDO DESDE LA PRIMERA PALABRA DEL PDF, aunque no sea el principio de una sección o no sea la página indicada.

5. **Solventar problemas comunes, indicaciones clave:**
    - Asegurate de mantener los signos de exclamación ya que a veces se eliminan en la salida.
    - Extraer texto literal, incluyendo signos ortográficos para evitar perder signos de excalación e interrogación que se suelen perder.
    - Ten cuidado con la información redundante, los pdf suelen tener al principio de la página una linea donde pone el titulo del libro y se repite en cada página como por ejemolo "Gramática pedagógica K'iche'". Esta información no debe de estar en la salida.
    - Si falta información en la fuente NO INVENTES NADA, es una transcripción, no hay que generar texto nuevo
    - NUNCA escribas nada que pueda romper el formato JSON como por ejemplo poner esto al inicio "```json" o poner "```" al final. 
    - TODO lo generado DEBE ser un formato JSON valido.
    - Si se ve un poco de otra página, una pequeña parte, por ser una foto mal escaneada (se ve parte de la página siguiente a la actual), no extraigas ese texto, ese texto se extraerá cuando llegues a la correspondiente página. 
    - Siempre que hagas un analisis morfologico y encuentres en el libro una palabra que este separada por guiones (-), dividela en distintas unidades (unit).
    - No se debe generar analisis morfologicos (morpheme_analysis) que tengan las unidades juntas en el verbo, es decir SIEMPRE se debe seprar el contenido en las unidades más pequeñas. Voy a pasarte un ejemplo de una entrada y una salida correcta y otra salida incorrecta (erronea).
    Entrada:
    x-e-ru-tz'ët
    COM-B3p-A3s-ver

    Salida correcta:
    ...
    <unit>
        <form>x-</form>
        <gloss>COM-</gloss>
    </unit>
    <unit>
        <form>e-</form>
        <gloss>B3p-</gloss>
    </unit>
    <unit>
        <form>ru-</form>
        <gloss>A3s-</gloss>
    </unit>
    <unit>
        <form>tz'ët</form>
        <gloss>ver</gloss>
    </unit>
    ...

    Salida incorrecta (erronea):
    ...
    <unit>
        <form>x-e-ru-tz'ët</form>
        <gloss>COM-B3p-A3s-ver</gloss>
    <unit>
    ...
 
6. **Salida:**  
   - JSON propio refinado.   

7. **Ejemplos**
Aqui te voy a pasar ejemplos de input en distintas lenguas mayas (es decir lo que verás en el pdf) y ejemplos de output, es decir lo que deberías generar a partir de ese input. Hay ejemplos de frases paralelas (paralel_phrase), también de gloasas interlineales (interlinear_gloss) con análisis morfológico (morpheme_analysis) en su interior y a veces con análisis sintáctico (syntactic_analysis).

**Ejemplo de segmentación morfológica obligatoria:**
*Entrada:* x-e-ru-tz'ët 
COM-B3p-A3s-ver

*Salida Correcta (JSON):*
{
   "interlinear_gloss":{
      "paralel_phrase":{
         "original":"xerutz'ët",
         "translation":"COM-B3p-A3s-ver"
      },
      "morpheme_analysis":[
         {
            "unit":{
               "form":"x-",
               "gloss":"COM-"
            }
         },
         {
            "unit":{
               "form":"e-",
               "gloss":"B3p-"
            }
         },
         {
            "unit":{
               "form":"ru-",
               "gloss":"A3s-"
            }
         },
         {
            "unit":{
               "form":"tz'ët",
               "gloss":"ver"
            }
         }
      ]
   }
}

*Salida Incorrecta (Errónea):*
{
   "interlinear_gloss":{
      "paralel_phrase":{
         "original":"xerutz'ët",
         "translation":"COM-B3p-A3s-ver"
      },
      "morpheme_analysis":[
          { "form": "x-e-ru-tz'ët", "gloss": "COM-B3p-A3s-ver" }
      ]
   }
}

---

***Ejemplo input (de la gramática normativa kaqchikel, página 54 del libro (56 del pdf))***:
Sustantivo Traducción Sustantivo Traducción
consonante inicial vocal inicial
kotz'i'j flor oj aguacate
nukotz'i'j mi flor woj mi aguacate

***Ejemplo output***:
***Ejemplo output (JSON)***:
[
  {
    "paralel_phrase": {
      "original": "kotz'i'j",
      "translation": "flor"
    }
  },
  {
    "paralel_phrase": {
      "original": "nukotz'i'j",
      "translation": "mi flor"
    }
  },
  {
    "paralel_phrase": {
      "original": "oj",
      "translation": "aguacate"
    }
  },
  {
    "paralel_phrase": {
      "original": "woj",
      "translation": "mi aguacate"
    }
  }
]


***Ejemplo input (de la gramática normativa kaqchikel)***:
k’am             chi-∅    w-il-a’ 
NEG             INC-B3A1SG-ver-SC 
No lo veo

***Ejemplo output***:
{
  "interlinear_gloss": {
    "paralel_phrase": {
      "original": "k’am chi-∅ w-il-a’",
      "translation": "No lo veo"
    },
    "morpheme_analysis": [
      {
        "unit": {
          "form": "k’am",
          "gloss": "NEG"
        }
      },
      {
        "unit": {
          "form": "chi-",
          "gloss": "INC"
        }
      },
      {
        "unit": {
          "form": "∅",
          "gloss": "B3"
        }
      },
      {
        "unit": {
          "form": "w-",
          "gloss": "A1SG"
        }
      },
      {
        "unit": {
          "form": "il",
          "gloss": "ver"
        }
      },
      {
        "unit": {
          "form": "-a’",
          "gloss": "SC"
        }
      }
    ]
  }
}

***Ejemlo input (de la gramática normativa kaqchikel)***:
jun       elq’om       ti’
ART      ladrón      DEM:este
Este ladrón


***Ejemplo output ***:
{
  "interlinear_gloss": {
    "paralel_phrase": {
      "original": "jun elq’om ti’",
      "translation": "Este ladrón"
    },
    "morpheme_analysis": [
      {
        "unit": {
          "form": "jun",
          "gloss": "ART"
        }
      },
      {
        "unit": {
          "form": "elq’om",
          "gloss": "ladrón"
        }
      },
      {
        "unit": {
          "form": "ti’",
          "gloss": "DEM:este"
        }
      }
    ]
  }
}

***Ejemplo input imagen (de la gramática normativa kaqchikel, página 158 del libro (160 del pdf))***:
...nqil nima'q taq yab'il,...
        _______
        SA
...encontramos graves enfermedades....
...n-0-q-il               nim-a'qtaq    yab'il,...
INC-B3s-Als-encontrar     grande-PL     PL/DIM enfermedad

***Ejemplo input copiado***:
...nqil nima'q taq yab'il,...
SA
...encontramos graves enfermedades....
El si...n-0-q-il
INC-B3s-Als-encontrar
nim-a'qtaq
grande-PL
yab'il,...
PL/DIM enfermedad


***Ejemplo Output***:
{
  "interlinear_gloss": {
    "paralel_phrase": {
      "original": "nqil nima'q taq yab'il",
      "translation": "encontramos graves enfermedades"
    },
    "morpheme_analysis": [
      {
        "unit": {
          "form": "n",
          "gloss": "INC"
        }
      },
      {
        "unit": {
          "form": "∅",
          "gloss": "B3s"
        }
      },
      {
        "unit": {
          "form": "q",
          "gloss": "A1s"
        }
      },
      {
        "unit": {
          "form": "il",
          "gloss": "encontrar"
        }
      },
      {
        "unit": {
          "form": "nima'q",
          "gloss": "grande-PL"
        }
      },
      {
        "unit": {
          "form": "taq",
          "gloss": "PL"
        }
      },
      {
        "unit": {
          "form": "yab'il",
          "gloss": "enfermedad"
        }
      }
    ],
    "syntactic_analysis": [
      {
        "unit": {
          "form": "nima'q",
          "gloss": "SA"
        }
      }
    ]
  }
}


**Ejemplo input (de la gramática normativa Kiche, página 22 del libro (23 del pdf)):**
xub’ano lo hizo transitivo
b’anik hacer intransitivo

**Ejemplo output:**
[
  {
    "interlinear_gloss": {
      "paralel_phrase": {
        "original": "xub'ano",
        "translation": "lo hizo"
      },
      "morpheme_analysis": [
        {
          "unit": {
            "form": "xub'ano",
            "gloss": "transitivo"
          }
        }
      ]
    }
  },
  {
    "interlinear_gloss": {
      "paralel_phrase": {
        "original": "b’anik",
        "translation": "hacer"
      },
      "morpheme_analysis": [
        {
          "unit": {
            "form": "b’anik",
            "gloss": "intransitivo"
          }
        }
      ]
    }
  }
]


**Ejemplo input (de la gramática normativa Mam, página 38 del libro (39 del pdf)):**
Ejemplos:
joj cuervo kjo’n milpa q’ij sol/día
jun uno xjel pregunta k’oj máscara

**Ejemplo output:**
[
  {
    "linea": "Ejemplos:"
  },
  {
    "paralel_phrase": {
      "original": "joj",
      "translation": "cuervo"
    }
  },
  {
    "paralel_phrase": {
      "original": "kjo’n",
      "translation": "milpa"
    }
  },
  {
    "paralel_phrase": {
      "original": "q’ij",
      "translation": "sol/día"
    }
  },
  {
    "paralel_phrase": {
      "original": "jun",
      "translation": "uno"
    }
  },
  {
    "paralel_phrase": {
      "original": "xjel",
      "translation": "pregunta"
    }
  },
  {
    "paralel_phrase": {
      "original": "k’oj",
      "translation": "máscara"
    }
  }
]



**Ejemplo input (de la gramática normativa Kaqchikel, página 103 del libro (105 del pdf)):**
Je',xkitz'ib'aj kan ri rub'ї.
Si, inscribieron su nombre.
Eje',rije' xek'amon el.
Si, ellos fueron los que se lo llevaron.

Direccionales
Los direccionales son partículas que indican el lugar hacia donde se dirige la acción.
Esta clase de palabra no acepta flexión ni derivación, no funcionan por sí solas y siempre
se posponen al núcleo predicativo que puede ser verbal o no verbal. Los direccionales
se presentan y funcionan asi:

***Ejemplo output***:
[
   {
      "paralel_phrase":{
         "original":"Je',xkitz'ib'aj kan ri rub'ї.",
         "translation":"Si, inscribieron su nombre."
      }
   },
   {
      "paralel_phrase":{
         "original":"Eje',rije' xek'amon el.",
         "translation":"Si, ellos fueron los que se lo llevaron."
      }
   },
   {
      "seccion":{
         "name":"Direccionales",
         "content":[
            {
               "line":"Los direccionales son partículas que indican el lugar hacia donde se dirige la acción."
            },
            {
               "line":"Esta clase de palabra no acepta flexión ni derivación, no funcionan por sí solas y siempre"
            },
            {
               "line":"se posponen al núcleo predicativo que puede ser verbal o no verbal. Los direccionales"
            },
            {
               "line":"se presentan y funcionan así:"
            }
         ]
      }
   }
]
            
            

**Ejemplo input (de la gramática normativa Kaqchikel, página 170 del libro (172 del pdf)):**
(Ten en cuenta que este es un ejemplo de syntactic_analysis, pero faltaría el morpheme_analysis para ser una interlinear_gloss completa).
Debes tener en cuenta que normalmente el analisis sintactico se realiza por unidades menores que la frase paralela completa.
Es por eso que en el form del unit del syntactic_analysis no suele ir la frase entera del original.
Voy a enseñarte un ejemplo de un analisis sintactico que deberia centrarse en la unidad verbal "nb'eqato'" y no en la frase original completa "nb'esamäj qatata', nb'eqato'".

...nb'esamäj qatata', nb'eqato',...
                      ________
                        SVT
...nuestro papá va a trabajar, vamos a ayudarlo,...



{
  "interlinear_gloss": {
    "paralel_phrase": {
      "original": "...nb'esamäj qatata', nb'eqato',...",
      "translation": "...nuestro papá va a trabajar, vamos a ayudarlo,..."
    },
    "syntactic_analysis": [
      {
        "unit": {
          "form": "nb'eqato'",
          "gloss": "SVT"
        }
      }
    ]
  }
}



**Ejemplo input (de la gramática normativa Kaqchikel, página 143 del libro (145 del pdf)):**
(Ten en cuenta que este es un ejemplo de syntactic_analysis, pero faltaría el morpheme_analysis para ser una interlinear_gloss completa).
(Habrá ocasiones en las que haya más de un unit en el syntactic_analysis, como en este caso).
...k'atzinel chi röj yojtzijon kik'in ri nima'q taq nan, nima'q taq tat... 
                ____                  _________________  ______________
                 SN                          SN               SN
...es importante que platiquemos con los principales señores y señoras...


{
  "interlinear_gloss": {
    "paralel_phrase": {
      "original": "...k'atzinel chi röj yojtzijon kik'in ri nima'q taq nan, nima'q taq tat...",
      "translation": "...es importante que platiquemos con los principales señores y señoras..."
    },
    "syntactic_analysis": [
      {
        "unit": {
          "form": "röj",
          "gloss": "SN"
        }
      },
      {
        "unit": {
          "form": "ri nima'q taq nan",
          "gloss": "SN"
        }
      },
      {
        "unit": {
          "form": "nima'q taq tat",
          "gloss": "SN"
        }
      }
    ]
  }
}